[Data]
life = 1000
power = 3000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 60
airjuggle = 15
sparkno = -1
guard.sparkno = -1
KO.echo = 0
volume = 0
IntPersistIndex = 60
FloatPersistIndex = 40

[Size]
xscale = 1
yscale = 1
ground.back = 10
ground.front = 10
air.back = 10
air.front = 10
height = 48
attack.dist = 160
proj.attack.dist = 90
proj.doscale = 0
head.pos = -5, -50
mid.pos = -5, -25
shadowoffset = 0
draw.offset = 0,0

[Velocity]
walk.fwd  = 4
walk.back = -4
run.fwd  = 0
run.back = 0
jump.neu = 0,-9
jump.back = -4
jump.fwd = 4
runjump.back = 0
runjump.fwd = 0
airjump.neu = 0
airjump.back = 0
airjump.fwd = 0

[Movement]
airjump.num = 0
airjump.height = 35
yaccel = .44
stand.friction = .85
crouch.friction = .82
;===============================================================================
; Lose:
;-------------------------------------------------------------------------------
[Statedef 170]
type = S
ctrl = 0
anim = 170+var(11)
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S0,25
volume = 999

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;===============================================================================
; Win:
;-------------------------------------------------------------------------------
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Time = 1
value = 181
;===============================================================================
; Win Pose:
;-------------------------------------------------------------------------------
[Statedef 181]
type = S
ctrl = 0
anim = 180+var(11)
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,6
volume = 50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S0,17
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S0,17
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S0,17
volume = 999

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 280
flag = roundnotover

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;-------------------------------------------------------------------------------
; Intro Selector
[Statedef 190]
anim = 190
type = S

[State 180, 1]
type = ChangeState
triggerall = !time && teammode = single && enemy,teammode = single
trigger1 = enemy, name = "Goku"
value = 192

[State 180, 1]
type = ChangeState
trigger1 = Time = 0
value = 191
;===============================================================================
; Normal Intro:
;-------------------------------------------------------------------------------
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,16
volume = 50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,6
volume = 50

[State 190, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;-------------------------------------------------------------------------------
; Intro VS Goku:
[Statedef 192]
type = S
ctrl = 0
anim = 190
velset = 0,0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
triggerall = enemy, name = "Goku"
trigger1 = time = 0
value = S0,20
volume = 999

[State 0, PlaySnd]
type = PlaySnd
triggerall = enemy, name = "Goku"
trigger1 = time = 0
value = S0,20
volume = 999

[State 0, PlaySnd]
type = PlaySnd
triggerall = enemy, name = "Goku"
trigger1 = time = 0
value = S5,6
volume = 50

[State 190, 1]
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;===============================================================================
; B:
;-------------------------------------------------------------------------------
; B - 1
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 200
poweradd = 50
velset = 0,0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,11
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,11
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,48
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = 10, 2
guardflag = MA
pausetime = 15,10
guard.pausetime = 10,3
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,4
guardsound = S4,1
ground.type = High
ground.slidetime = 8
ground.hittime  = 10
guard.hittime = 8
ground.velocity = -2
guard.velocity = -2
air.velocity = -2,-1
envshake.time = 10
envshake.ampl = -8
Fall = 0

[State 0, Wind FX]
type = Explod
trigger1 = Animelem = 3
anim = 7038
ID = 7038
pos = 27,-31
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .1,.1
vel = 1,0
sprpriority = 3
ontop = 1
ownpal = 1
removeongethit = 1
angle = -15

[State 200, Spark CVS]
type = Explod
trigger1 = Movehit = 1
anim = 7010
ID = 7002
postype = P1
pos = 30,-30
facing = -1
sprpriority = 2
supermove = 1
removetime = -2
bindtime = 1
ownpal = 1
scale = 0.075,0.075
removeongethit = 1
ontop = 1
supermovetime 	= 999
ignorehitpause  = 1
persistent = 0

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 210

[State 200, End]
type = ChangeState
triggerall = power >= 200
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; B - 2
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 210
poweradd = 50
velset = 0,0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -5

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,8
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,8
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,48
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = 12, 2
guardflag = MA
pausetime = 15,10
guard.pausetime = 10, 4
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,32
guardsound = S4,1
ground.type = High
ground.slidetime = 7
ground.hittime  = 10
guard.hittime = 8
ground.velocity = -6
air.velocity = -2,-1
envshake.time = 10
envshake.freq = 8
Fall = 0

[State 0, Helper]
type = Helper
triggerall = Numhelper(801) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 801
stateno = 801
pos = 0,-30
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 211

[State 200, End]
type = ChangeState
triggerall = power >= 200
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; B - 3
[Statedef 211]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 211
poweradd = 50
velset = 0,0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -5

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,8
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,8
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,48
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = diagup
damage    = 15, 2
guardflag = MA
pausetime = 15,10
guard.pausetime = 10, 4
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,32
guardsound = S4,1
ground.type = High
ground.slidetime = 35
ground.hittime  = 35
guard.hittime = 10
ground.velocity = -2,-8
air.velocity = -2,-8
envshake.time = 10
envshake.freq = 8
Fall = 1

[State 0, Helper]
type = Helper
triggerall = Numhelper(801) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 801
stateno = 801
pos = 0,-30
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 200, End]
type = ChangeState
Triggerall = MoveHit
trigger1 = ailevel = 0 && command = "holdup"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 40

[State 200, End]
type = ChangeState
triggerall = power >= 200
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Machine Gun Punch!
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 220
poweradd = 30
velset = 0,0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S0,31
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S0,31
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time=0
value = S0,31
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4||animelem = 5||animelem = 6||animelem = 7||animelem = 8||animelem = 9||animelem = 10||animelem = 11
x = 1.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4||animelem = 5||animelem = 6||animelem = 7||animelem = 8||animelem = 9||animelem = 10||animelem = 11
value = S1,48
volume = 50

[State 200, 1]
type = HitDef
trigger1 = animelem = 4||animelem = 5||animelem = 6||animelem = 7||animelem = 8||animelem = 9||animelem = 10||animelem = 11
attr = S, NA
animtype  = Light
damage    = 8
guardflag = MA
pausetime = 6,5
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,30
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 23
guard.hittime = 8
ground.velocity = -1,0
air.velocity = -1,-1
envshake.time = 10
envshake.ampl = -4
Fall = 0

[State 0, Explod]
type = Explod
triggerall = time < 29 && time > 14
trigger1 = timemod = 2,0
anim = 7022
ID = 7022
pos = -5,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .5*Helper(999999),Fvar(16),.5*Helper(999999),Fvar(16)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1

[State 0, Shadow FX]
type = Explod
Triggerall = Time < 24
Trigger1 = TimeMod = 3,0
anim = 580
ID = 580
pos = (-5-Random%20),(-15-Random%20)
postype = p1
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = .3,.15
sprpriority = 2
ontop = Cond(Random<500,1,0)
ownpal = 1
removeongethit = 1
ignorehitpause = 1
Vel = -1,0
angle = 90

[State 0, Helper]
type = Helper
triggerall = Numhelper(801) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 801
stateno = 801
pos = -10+random%20,-10-random%40
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 0, Helper]
type = Helper
triggerall = Numhelper(802) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 802
stateno = 801
pos = 0,-30
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 0, Helper]
type = Helper
triggerall = Numhelper(803) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 803
stateno = 801
pos = 0,-40
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command != "holddown"
trigger1 = ailevel = 0 && command = "b"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 300

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "holddown"
trigger1 = ailevel = 0 && command = "b"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 360

[State 200, End]
type = ChangeState
triggerall = power >= 200
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Get Lost
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 230
poweradd = 150
velset = 0,0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -1

[State 0, VelSet]
type = VelSet
trigger1 = time = 3
x = 9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,33
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,33
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,48
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Back
damage    = 25
guardflag = MA
pausetime = 10,10
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,37
guardsound = S4,1
ground.type = High
ground.slidetime = 10
ground.hittime  = 30
guard.hittime = 2
ground.velocity = -15, 2
air.velocity = -15,-6
envshake.time = 16
Fall = 1


[State 0, Charge]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Charge"
ID = 231
stateno = 231
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
Supermovetime = 999
size.xscale = .25*Helper(999999),Fvar(16)
size.yscale = .25*Helper(999999),Fvar(16)

[State 0,Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
ID = 371
name = "Ray-Hitspark"
stateno = 803
pos = 35,-5
postype = P1
facing = Cond(Random<500,1,-1)
ownpal = 1
size.xscale = 0.075*1.5
size.yscale = 0.075*1.5
ignorehitpause = 1
persistent = 0

[State 0,Helper]
type = Helper
trigger1 = movecontact = 1
helpertype = normal
ID = 371
name = "Ray-Hitspark"
stateno = 804
pos = 35,-5
postype = P1
facing = Cond(Random<500,1,-1)
ownpal = 1
size.xscale = .25+var(10)/500
size.yscale = .25+var(10)/500
ignorehitpause = 1
persistent = 0

[State 0,Helper]
type = Helper
trigger1 = movecontact = 1
helpertype = normal
ID = 073
name = "Ray-Hitspark"
stateno = 803
pos = 35,-5
postype = P1
facing = Cond(Random<500,1,-1)
ownpal = 1
size.xscale = .125+var(10)/500
size.yscale = .125+var(10)/500
ignorehitpause = 1
persistent = 0

[State 0,Helper]
type = Helper
trigger1 = animelem = 5
helpertype = normal
name = "Reikodan - FX"
ID = 241
stateno = 6135
pos = 30,-5
Size.XScale = .2
Size.YScale = .2
postype = p1
facing = 1
ownpal = 1
Persistent = 0

[State 200, End]
type = ChangeState
triggerall = power >= 200
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; raygun charge
[Statedef 231]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 551+root,var(11)
sprpriority = 9

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time < 30
scale = .1+time*.015,.1+time*.015

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time > 30
scale = 0.55,0.55

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 30, 0
value = S5,36
volume = 999
channel = 5

[State 0, Helper]
type = Helper
triggerall = numhelper(232) = 0
trigger1 = timemod = 25, 0
helpertype = normal ;player
name = "Charge Swirl"
ID = 232
stateno = 232
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999999
pausemovetime = 999999999

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,time>=2 && root,time < 10
trigger1 = 1
pos = -22,-34

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,time >= 10 && root,time < 11
trigger1 = 1
pos = 23,-24

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,time >= 11 && root,time < 12
trigger1 = 1
pos = 22,-6

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,time >= 12 && root,time < 15
trigger1 = 1
pos = 23,-24

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,time >= 15 && root,time < 20
trigger1 = 1
pos = 7,-20

[State 9001:VarRandom]
type=VarRandom
trigger1=1
v=0
range=-65,65

[State 9001:VarRandom]
type=VarRandom
trigger1=1
v=1
range=-65 ,65

[State 9001:Helper]
type=Helper
trigger1=((GameTime%2)=0)
helpertype=Normal
name="Charge Balls"
id=233
stateno=233
pos=var(0),var(1)
postype=p1
facing=1
keyctrl=0
ownpal=1
supermovetime=9999
pausemovetime=9999
ignorehitpause=1

[State 0, StopSnd]
type = StopSnd
trigger1 = root,animelem = 8
trigger2 = root,stateno != 230
trigger3 = root,movetype = h
channel = 5

[State 200, End]
type = Destroyself
trigger1 = root,animelem = 8
trigger2 = root,stateno != 230
trigger3 = root,movetype = h
;-------------------------------------------------------------------------------
; raygun charge swirl
[Statedef 232]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 470
sprpriority = 9

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.55,0.55

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 200, End]
type = Destroyself
trigger1 = root,animelem = 8
trigger2 = root,stateno != 230
trigger3 = root,movetype = h
;---------------------------------------------------------------
;Charge Balls
[Statedef 233]
type = S
movetype = I
physics = S
juggle = 4
ctrl = 0
anim = 551
sprpriority = 9

[State 0,VarSet]
type = VarSet
trigger1 = !Time
fv = 2
value = (-0.02+0.02*(Random%2))

[State 0,AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.1+Fvar(2),0.1+Fvar(2)

[State 0,VelSet]
type = VelSet
trigger1 = 1
x = (ParentDist X-0)/15.0
y = (Parentdist y-0)/15.0

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow

[State 0,DestroySelf]
type = Destroyself
triggerall = cond(SelfAnimExist(2),var(46):=1,1)
trigger1 = time >= 20
trigger2 = root,animelem = 8
trigger3 = root,stateno != 230
trigger4 = root,movetype = h
;----------------------------------------------------------------------
;Reikodan - FX
[Statedef 614]
type=A
movetype=I
physics=N
anim=385
sprpriority=3
velset=1,0

[State 0,PalFXWiz]
type=PalFX
trigger1=1
time=99999
add=-128,-25,0
mul=512,512,512
color=64

[State 0, BindToRoot]
type = BindToRoot
trigger1 = time >= 0
pos = 30,-5

[State 0,VarAdd]
type=VarAdd
trigger1=Time=[0,3]
fv=5
value=.125

[State 0,VarAdd]
type=VarAdd
trigger1=Time>=4
fv=5
value=-.25

[State 0,AngleDraw]
type=AngleDraw
trigger1=1
scale=1,1+FVar(5)
value = -48
ignorehitpause=1

[State 0,Trans]
type=Trans
trigger1=AnimElemTime(4)>0
trans=AddAlpha
Alpha=256-(Time*20),256

[State 0,AssertSpecial]
type=AssertSpecial
trigger1=1
flag=NoShadow
ignorehitpause=0

[State 200,End]
type=Destroyself
trigger1=animtime = 0

;===============================================================================
; A:
;-------------------------------------------------------------------------------
[Statedef 300]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 300
poweradd = 40
velset = 0,0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,12
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,12
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,48
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = 15
guardflag = MA
pausetime = 10,10
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,38
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
guard.hittime = 12
ground.velocity = -8
air.velocity = -2,-1
Fall = 0
envshake.time = 15

[State 0, Helper]
type = Helper
triggerall = Numhelper(801) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 801
stateno = 801
pos = 0,-25
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 310

[State 200, End]
type = ChangeState
triggerall = power >= 200
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; A - 2
;-------------------------------------------------------------------------------
[Statedef 310]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 310
poweradd = 40
velset = 0,0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,11
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,48
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = 15
guardflag = MA
pausetime = 10,10
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,35
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
guard.hittime = 13
ground.velocity = -8
air.velocity = -2,-1
Fall = 0
envshake.time = 15

[State 0, Helper]
type = Helper
triggerall = Numhelper(801) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 801
stateno = 801
pos = 0,-25
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 320

[State 200, End]
type = ChangeState
triggerall = power >= 200
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; A - 3
;-------------------------------------------------------------------------------
[Statedef 320]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 320
poweradd = 40
velset = 0,0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,12
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,48
volume = 50

[State 200, 1]
type = HitDef
trigger1 = !movecontact
attr = S, NA
animtype  = medium
damage    = 20
guardflag = MA
pausetime = 10,10
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,41
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime = 11
guard.hittime = 4
ground.velocity = -8
air.velocity = -2,-8
Fall = 0
Envshake.time = 15

[State 0, Helper]
type = Helper
triggerall = Numhelper(801) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 801
stateno = 801
pos = 0,-25
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 330

[State 200, End]
type = ChangeState
triggerall = power >= 200
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; A - 4
;-------------------------------------------------------------------------------
[Statedef 330]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 330
poweradd = 40
velset = 0,0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,21
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,21
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,48
volume = 50

[State 200, 1]
type = HitDef
trigger1 = !movecontact
attr = S, NA
animtype  = medium
damage    = 20
guardflag = MA
pausetime = 10,10
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,42
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime = 19
guard.hittime = 3
ground.velocity = -8
air.velocity = -2,-8
Fall = 0
Envshake.time = 15

[State 0, Helper]
type = Helper
triggerall = Numhelper(801) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 801
stateno = 801
pos = 0,-25
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 340

[State 200, End]
type = ChangeState
triggerall = power >= 200
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; A - 5
;-------------------------------------------------------------------------------
[Statedef 340]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 340
poweradd = 40
velset = 0,0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,23
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,23
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,48
volume = 50

[State 200, 1]
type = HitDef
trigger1 = !movecontact
attr = S, NA
animtype  = medium
damage    = 20
guardflag = MA
pausetime = 10,10
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,43
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 11
guard.hittime = 4
ground.velocity = -8
air.velocity = -2,-8
Fall = 0
Envshake.time = 15

[State 0, Helper]
type = Helper
triggerall = Numhelper(801) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 801
stateno = 801
pos = 0,-40
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 350

[State 200, End]
type = ChangeState
triggerall = power >= 200
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; A - 6
;-------------------------------------------------------------------------------
[Statedef 350]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 350
poweradd = 40
velset = 0,0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 8

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,24
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,24
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,48
volume = 50

[State 200, 1]
type = HitDef
trigger1 = !movecontact
attr = S, NA
animtype  = diagup
damage    = 20
guardflag = MA
pausetime = 10,10
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,44
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
guard.hittime = 4
ground.velocity = -8, -8
air.velocity = -8,-8
Fall = 0
Envshake.time = 15

[State 0, TargetState]
type = TargetState
triggerall = enemy,stateno != [454,456]
trigger1 = movehit = 1
value = 454

[State 0, Helper]
type = Helper
triggerall = Numhelper(801) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 801
stateno = 801
pos = 0,-25
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 200, End]
type = ChangeState
triggerall = power >= 200
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 400

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; Down + B
;-------------------------------------------------------------------------------
[Statedef 360]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 360
poweradd = 150
velset = 2,0
sprpriority = 2


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,24
volume = 999
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,24
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,48
volume = 50

[State 200, 1]
type = HitDef
trigger1 = !movecontact
attr = S, NA
animtype  = diagup
damage    = 20
guardflag = MA
pausetime = 10,10
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,45
guardsound = S4,1
ground.type = High
ground.slidetime = 35
ground.hittime  = 35
ground.velocity = -1, -8
guard.hittime = 6
air.velocity = -1,-8
fall.recover = 0
Fall = 1
Envshake.time = 15
Envshake.ampl = 8

[State 0, Helper]
type = Helper
triggerall = Numhelper(801) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 801
stateno = 801
pos = 0,-25
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 200, End]
type = ChangeState
Triggerall = MoveHit
trigger1 = ailevel = 0 && command = "holdup"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 40

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; C - Raygun Charge:
;-------------------------------------------------------------------------------
[Statedef 400]
type    = U
movetype= I
physics = N
juggle  = 2
ctrl = 0
anim = 400+var(11)
velset = 0,0
sprpriority = 2

[State 200, Jump Anim]
type = ChangeAnim
triggerall = anim != 484
trigger1 = statetype = A && time = 0
value = 484

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time > 15
statetype = S       ;S,A,C,L

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time > 15 && time < 150
value = -1

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 12
Time=6
Ampl=3
Freq=30

[State 0, Charge]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "Charge"
ID = 470
stateno = 470
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
Supermovetime = 999
size.xscale = .25*Helper(999999),Fvar(16)
size.yscale = .25*Helper(999999),Fvar(16)

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 25    ;fv = 10
value = 1

[State 200, Stand Anim]
type = ChangeAnim
triggerall = anim = 400
trigger1 = animtime = 0
value = 480

[State 0, Stand VelSet]
type = VelSet
trigger1 = anim = 480 || anim = 488
x = 0
y = 0

[State 200, Walk Forward Anim]
type = ChangeAnim
triggerall = anim != 483 && anim != 484 && anim != 487
trigger1 = anim != 481
trigger1 = command = "holdfwd"
value = 481

[State 0, Walk Forward VelSet]
type = VelSet
trigger1 = anim = 481
x = const(velocity.walk.fwd.x)

[State 200, Walk Back Anim]
type = ChangeAnim
triggerall = anim != 483 && anim != 484 && anim != 487
trigger1 = anim != 482
trigger1 = command = "holdback"
value = 482

[State 0, Walk Back VelSet]
type = VelSet
trigger1 = anim = 482
x = const(velocity.walk.back.x)

[State 200, Jump Start Anim]
type = ChangeAnim
triggerall = anim != 483 && anim != 484 && anim != 487
triggerall = time > 15
trigger1 = anim != 483
trigger1 = command = "up"
value = 483

[State 40, 2]
type = VarSet
trigger1 = anim = 480
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = anim = 483
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 4]
type = VelSet
trigger1 = anim = 484 || anim = 487
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))

[State 0, Veladd]
type = Veladd
trigger1 = anim = 484 || anim = 487
y = 0.5
x = 0

[State 200, Jump Anim]
type = ChangeAnim
triggerall = anim != 484
trigger1 = animtime = 0 && anim = 483
value = 484

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 484  || anim = 487
statetype = A       ;S,A,C,L

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim != 484 && anim != 487
statetype = S       ;S,A,C,L

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > 0 && anim = 484
value = 487

[State 200, Land Anim]
type = ChangeAnim
triggerall = time > 15
triggerall = anim = 487
trigger1 = pos y = 0
trigger1 = anim != 488
trigger1 = command != "up"
value = 488

[State 0, Land]
type = Explod
triggerall = numexplod(7014) = 0
trigger1 = anim = 488
anim = 7014
ID = 7014
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4*Helper(999999),Fvar(16),.4*Helper(999999),Fvar(16)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 200, Stand Anim]
type = ChangeAnim
triggerall = time > 15
triggerall = anim = 488
trigger1 = anim != 480
trigger1 = animtime = 0
value = 480

[State 200, Stand Anim]
type = ChangeAnim
triggerall = time > 15
triggerall = anim = 481
trigger1 = anim != 480
trigger1 = command != "holdfwd"
value = 480

[State 200, Stand Anim]
type = ChangeAnim
triggerall = time > 15
triggerall = anim = 482
trigger1 = anim != 480
trigger1 = command != "holdback"
value = 480

[State 0, VelSet]
type = VelSet
triggerall = anim = 484 || anim = 487
trigger1 = pos y >= -1
y = 0

[State 0, PosSet]
type = PosSet
triggerall = anim = 484 || anim = 487
trigger1 = pos y >= -1
y = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 15
fv = 10
value = 0.05

[State 0, VarAdd]
type = VarAdd
trigger1 = time > 15 && time < 150
fv = 10
value = 0.0002

[State 0, VarSet]
type = VarSet
trigger1 = time = 150
fv = 10
value = 0.05+(0.0002*135)

[State 0, Fire!]
type = ChangeState
triggerall = anim != 484 && anim != 487
triggerall = time > 15
trigger1 = command != "hold_c"
value = 402
ctrl = 1

[State 0, Fire Air]
type = ChangeState
triggerall = anim = 484 || anim = 487
triggerall = time > 15
trigger1 = command != "hold_c"
value = 403
ctrl = 1
;===============================================================================
; Raygun Fire:
;-------------------------------------------------------------------------------
[Statedef 402]
type = S
movetype = A
physics = S
juggle  = 2
velset = 0,0
ctrl = 0
anim = 401+var(11)
velset = -3,0
poweradd = -200
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 30
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = 1 
v = 25   ;fv = 10
value = 0

[State 0, Explod]
type = Explod
trigger1 = animelem=2
anim = 7022
ID = 1051
pos = -15*Helper(999999),Fvar(16),0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .5*Helper(999999),Fvar(16),.5*Helper(999999),Fvar(16)
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 12
time = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S0,3
volume = 999

[State 0, raygun]
type = Helper
trigger1 = animelem=2
trigger1 = var(2) = 0
helpertype = normal
name = "raygun"
ID = 450
stateno = 450
pos = 27*Helper(999999),Fvar(16),-27*Helper(999999),Fvar(16)
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.1*Helper(999999),Fvar(16)
size.yscale = 1.1*Helper(999999),Fvar(16)

[State 0, raygun]
type = Helper
trigger1 = animelem=2
trigger1 = var(2) = 1
helpertype = normal
name = "raygun"
ID = 450
stateno = 450
pos = 21*Helper(999999),Fvar(16),-40*Helper(999999),Fvar(16)
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.2*Helper(999999),Fvar(16)
size.yscale = 1.2*Helper(999999),Fvar(16)

[State 0,Helper]
type=Helper
trigger1=AnimElem=2
helpertype=normal
name="Fire FX"
ID=453
stateno=453
postype=p1
facing=1
keyctrl=0
ownpal=1
size.xscale=.25
size.yscale=.25

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0 
value = 0
ctrl = 1
;===============================================================================
; Raygun Fire - Air:
;-------------------------------------------------------------------------------
[Statedef 403]
type = S
movetype= A
physics = S
juggle  = 2
velset = 0,0
ctrl = 0
anim = 402
velset = -8,-8
poweradd = -200
sprpriority = 2

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
statetype = A
physics = A         ;A,C,S,N

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 30
value = 1

[State 0, StopSnd]
type = StopSnd
trigger1 = 1
channel = 5

[State 0, VarSet]
type = VarSet
trigger1 = 1 
v = 25   ;fv = 10
value = 0

[State 0, Explod]
type = Explod
trigger1 = animelem=2
anim = 7022
ID = 1051
pos = -15*Helper(999999),Fvar(16),0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .5*Helper(999999),Fvar(16),.5*Helper(999999),Fvar(16)
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 12
time = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S0,3
volume = 999

[State 0, raygun]
type = Helper
trigger1 = animelem=2
trigger1 = var(2) = 0
helpertype = normal
name = "raygun"
ID = 450
stateno = 450
pos = 27*Helper(999999),Fvar(16),-27*Helper(999999),Fvar(16)
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.1*Helper(999999),Fvar(16)
size.yscale = 1.1*Helper(999999),Fvar(16)

[State 0, raygun]
type = Helper
trigger1 = animelem=2
trigger1 = var(2) = 1
helpertype = normal
name = "raygun"
ID = 450
stateno = 450
pos = 21*Helper(999999),Fvar(16),-40*Helper(999999),Fvar(16)
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.2*Helper(999999),Fvar(16)
size.yscale = 1.2*Helper(999999),Fvar(16)

[State 0,Helper]
type=Helper
trigger1=AnimElem=2
helpertype=normal
name="Fire FX"
ID=453
stateno=453
postype=p1
facing=1
keyctrl=0
ownpal=1
size.xscale=.25
size.yscale=.25

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0 
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Ray Gun
[Statedef 450]
type    = S
movetype= A
physics = N
juggle  = 2
ctrl = 0
anim = 450+root,var(11)
sprpriority = 3

[State 0, PosAdd]
type = Playsnd
trigger1 = time = 0
value = S2,1
volume = 999

[State 0, VelSet]
type = VelSet
triggerall = root,var(30) = 0
trigger1 = time = 0
x = 15
y = 0

[State 0, VelSet]
type = VelSet
triggerall = root,var(30) = 1
trigger1 = time = 0
x = 15
y = 12

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 410
time = 999

[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = 1+root,fvar(2)+root,fvar(3)

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0,Explod]
type=Explod
trigger1=Time%1=0
Anim=551
ID=551
Pos=(10+Random%50),(30-Random%40)
PosType=P1
Vel=Random%100*Cond(Random<=500,0.01*(Random%2),-0.01*(Random%2)),-0.5
Accel=-0.02+0.01*(Random%10),-0.05-0.01*(Random%5)
Scale=0.025,0.025
OnTop=Cond(Random<=500,0,1)
OwnPal=0
IgnoreHitPause=1

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "Ray Gun Ball"
ID = 451
stateno = 451
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = root,fvar(10)
size.yscale = root,fvar(10)

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal ;player
name = "Ray Gun Flame"
ID = 452
stateno = 452
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, Soru]
type=Explod
TRIGGERALL=root,var(30)=0
TRIGGERALL=cond(SelfAnimExist(2),var(46):=1,1)
trigger1=Time%4=0
anim=580
ID=000
postype=p1
pos=-45,0
scale=root,fvar(10) + 0.5,.2
vel=-.25,0
facing=1
VFacing=Cond(Random<500,1,-1)
bindtime=6
removetime=-2
sprpriority=0
ontop=0
ownpal=1
removeongethit=1
ignorehitpause=1
Angle=-90

[State 0, Soru]
type=Explod
TRIGGERALL=root,var(30)=1
TRIGGERALL=cond(SelfAnimExist(2),var(46):=1,1)
trigger1=Time%4=0
anim=580
ID=000
postype=p1
pos=-45,-30
scale=root,fvar(10) + 0.5,.2
vel=-.25,-.25
facing=1
VFacing=-1
bindtime=6
removetime=-2
sprpriority=0
ontop=0
ownpal=1
removeongethit=1
ignorehitpause=1
Angle=-45

[State 0,HitDef]
type=HitDef
trigger1=!MoveContact
attr=A,SP
hitflag=MAFD
priority=3,Hit
guardflag=MA
animtype=Medium
damage=(root,fvar(10) * 1000) + 20,20
pausetime=0,15
guard.pausetime=0,10
ground.type=High
ground.slidetime=30
ground.hittime=20
ground.velocity=-7,-6
guard.velocity=-8
air.velocity=-7,-6
airguard.velocity=-2,-2
EnvShake.Time=5
EnvShake.Ampl=-4
EnvShake.Freq=30
fall=1
Getpower=0,0
PalFX.time=30
PalFX.add=-200,-200,-200
PalFX.mul=256,256,256
PalFX.sinadd=50,50,50,50
PalFX.invertall=0
PalFX.color=256
Sprpriority=3

[State 200, End]
type = ChangeState
trigger1 = movecontact
trigger2 = frontedgebodydist < 0
trigger3 = pos y > 0
trigger4 = time = 500
value = 410
;-----------------------------------------------------------------
;Ray Gun - Ball
[Statedef 451]
type=A
movetype=I
physics=N
ctrl=0
anim=451
sprpriority=3

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 999999999999999
add = -128,-10,0
mul = 512,250,512
sinadd = 0,0,0,1
invertall = 0
color = 0

[State 0,BindToParent]
type=BindToParent
trigger1=1
pos=0,0

[State 500,Perfect Angle]
type=AngleSet
trigger1=1
value=((atan((-1*Parent,Vel Y)/Parent,Vel X))*(360/(2*pi)))+0

[State 0,Trans]
type=Trans
trigger1=1
trans=add

[State 0,AssertSpecial]
type=AssertSpecial
trigger1=1
flag=noshadow
ignorehitpause=1

;from Rivelio

[State 0,DestroySelf]
type=Destroyself
trigger1 = numhelper(450) = 0
;---------------------------------------------------------------------------------------
;Ray Gun - Flame
[Statedef 452]
type=A
movetype=I
physics=N
ctrl=0
anim=452
sprpriority=3

[State 0,BindToParent]
type=BindToParent
trigger1=1
pos=0,0

[State 500,Perfect Angle]
type=AngleSet
trigger1=1
value=((atan((-1*Parent,Vel Y)/Parent,Vel X))*(360/(2*pi)))+0

[State 500,Draw]
type=AngleDraw
trigger1=1
scale=root,fvar(10),root,fvar(10)

[State 0,Trans]
type=Trans
trigger1=1
trans=add

[State 0,AssertSpecial]
type=AssertSpecial
trigger1=1
flag=noshadow
ignorehitpause=1

[State 0,DestroySelf]
type=Destroyself
trigger1 = numhelper(450) = 0
;----------------------------------------------------------------------------------------------------------------
;Ray Gun - Fire FX
[Statedef 453]
type=A
movetype=I
physics=N
ctrl=0
anim=453
sprpriority=3

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 99999999999
add = -128,-10,0
mul = 512,512,512
sinadd = 0,0,0,1
invertall = 0
color = 0

[State 0,BindToParent]
type=BindToParent
triggerall = root,var(30)=0
trigger1=Time=[0,2]
pos=20,-27
ignorehitpause=1

[State 0,BindToParent]
type=BindToParent
triggerall = root,var(30)=1
trigger1=Time=[0,2]
pos=20,-20
ignorehitpause=1

[State 0,AngleDraw]
type=AngleDraw
trigger1=1
scale=1,1
value=cond(root,var(30),-45,0)
ignorehitpause=1

[State 0,Trans]
type=Trans
trigger1=1
trans=addalpha
alpha=300-(Time*15),256

[State 0,AssertSpecial]
type=AssertSpecial
trigger1=1
flag=noshadow
ignorehitpause=1

[State 200, End]
type = Destroyself
trigger1 = animtime = 0
;----------------------------------------------------------------------------------------------------------------
; Ray Gun - Fin
[Statedef 410]
type    = S
movetype= I
physics = S
juggle  = 2
ctrl = 0
anim = 9999
velset = 0,0
sprpriority = 3

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = 30*Helper(999999),Fvar(16)
y = 0

[State 0,Helper]
type=Helper
trigger1=!Time
helpertype=normal
ID=411
name="H UMUS"
stateno=411
pos=0,0
postype=P1
facing=1
ownpal=1
size.xscale=0.45
size.yscale=0.45
ignorehitpause=1
PERSISTENT=0

[State 0,Helper]
type=Helper
trigger1=!Time
helpertype=normal
ID=412
name="expl1"
stateno=412
pos=0,0
postype=P1
facing=1
ownpal=1
size.xscale=0.25
size.yscale=0.25
ignorehitpause=1
PERSISTENT=0

[State 0,Helper]
type=Helper
trigger1=!Time
helpertype=normal
ID=413
name="expl2"
stateno=412
pos=0,0
postype=P1
facing=1
ownpal=1
size.xscale=0.3
size.yscale=0.3
ignorehitpause=1
PERSISTENT=0

[State 0,Helper]
type=Helper
trigger1=!Time
helpertype=normal
ID=414
name="explspark"
stateno=413
pos=0,0
postype=P1
facing=1
ownpal=1
size.xscale=0.75
size.yscale=0.75
ignorehitpause=1
PERSISTENT=0

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,12
volume = 100

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,12
volume = 100

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,12
volume = 50

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 5

[State 200, End]
type = Destroyself
trigger1 = animtime = 0
;-----------------------------------------------------------------
;Ray Gun Explosion - 0
[Statedef 411]
type=A
movetype=I
physics=N
ctrl=0
anim=490
sprpriority = 3

[State 0,VarSet]
type=VarSet
trigger1=!Time
v=0
value=Random%360
ignorehitpause=1

[State 0,AngleDraw]
type=AngleDraw
Trigger1=1
scale=1+(Time*0.05),1+(Time*0.05)
value=Var(0)

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 99999999999
add = -64,-8,0
mul = 512,512,512
sinadd = 0,0,0,1
invertall = 0
color = 0

[State 0,Trans]
type=Trans
trigger1=1
trans=addalpha
alpha=256,256

[State 0,PlayerPush]
type=PlayerPush
trigger1=1
value=1

[State 0,ScreenBound]
type=ScreenBound
trigger1=1
value=0

[State 0,AssertSpecial]
type=AssertSpecial
trigger1=1
flag=noshadow

[State 200, End]
type = Destroyself
trigger1 = animtime = 0
;-----------------------------------------------------------------
;Ray Gun Explosion - 1
[Statedef 412]
type=A
movetype=I
physics=N
ctrl=0
anim=491
sprpriority = 1

[State 0,VarSet]
type=VarSet
trigger1=!Time
v=0
value=Random%360
ignorehitpause=1

[State 0, SprPriority]
type = SprPriority
trigger1 = ishelper(413)
value = 0

[State 0,AngleDraw]
type=AngleDraw
Trigger1=1
scale=1+(Time*0.025),1+(Time*0.025)
value=Var(0)

[State 0, PalFXWiz]
type = PalFX
triggerall = ishelper(412)
trigger1 = 1
time = 99999999999
add = -64,-8,0
mul = 512,512,512
sinadd = 0,0,0,1
invertall = 0
color = 0

[State 0,PalFXWiz]
type=PalFX
triggerall=IsHelper(413)
Trigger1=1
time=99999
add=0,0,0
mul=256,256,256
color=0

[State 0,Trans]
type=Trans
triggerall = ishelper(412)
trigger1=1
trans=addalpha
alpha=256,256


[State 0,Trans]
type=Trans
TriggerALL= ishelper(413)
trigger1=1
trans=Sub
ignorehitpause=1

[State 0,PlayerPush]
type=PlayerPush
trigger1=1
value=1

[State 0,ScreenBound]
type=ScreenBound
trigger1=1
value=0

[State 0,AssertSpecial]
type=AssertSpecial
trigger1=1
flag=noshadow

[State 200, End]
type = Destroyself
trigger1 = animtime = 0
;-----------------------------------------------------------------
;Ray Gun Explosion - 2
[Statedef 413]
type=A
movetype=I
physics=N
ctrl=0
anim=492
sprpriority = 4

[State 0,VarSet]
type=VarSet
trigger1=!Time
v=0
value=Random%360
ignorehitpause=1

[State 0,AngleDraw]
type=AngleDraw
Trigger1=1
scale=1-(Time*0.025),1-(Time*0.025)
value=Var(0)

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 99999999999
add = -64,-8,0
mul = 512,512,512
sinadd = 0,0,0,1
invertall = 0
color = 0

[State 0,Trans]
type=Trans
Trigger1=1
trans=addalpha
alpha=256-(Time*25),256
ignorehitpause=1

[State 0,PlayerPush]
type=PlayerPush
trigger1=1
value=1

[State 0,ScreenBound]
type=ScreenBound
trigger1=1
value=0

[State 0,AssertSpecial]
type=AssertSpecial
trigger1=1
flag=noshadow

[State 200, End]
type = Destroyself
trigger1 = animtime = 0
;----------------------------------------------------------------
;Ray Gun Explosion - 3
[Statedef 414]
type=A
movetype=I
physics=N
anim=493
sprpriority=0

[State 0,VarSet]
type=VarSet
trigger1=!Time
v=0
value=Random%360


[State 0,VarAdd]
type=VarAdd
TriggerALL=FVAR(1)<1&&AnimElemTime(3)>=0
trigger1=1
Fv=1
value=.1
ignorehitpause=1

[State 0,AngleDraw]
type=AngleDraw
Trigger1=1
value=VAR(0)
scale=1+(Time*0.05),1+(Time*0.05)

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 99999999
add = -128,-10,0
mul = 512,512,512
sinadd = 0,0,0,1
invertall = 0
color = 0

[State 200, End]
type = Destroyself
trigger1 = animtime = 0
;-------------------------------------------------------------------------------
; raygun charge
[Statedef 470]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 551+root,var(11)
sprpriority = 9

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time < 30
scale = .1+time*.015,.1+time*.015

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time > 30
scale = 0.55,0.55

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,37
volume = 999
channel = 5

[State 0, PlaySnd]
type = PlaySnd
triggerall = time >= 90
trigger1 = timemod = 30, 0
value = S5,36
volume = 999
channel = 5

[State 0, Helper]
type = Helper
triggerall = numhelper(471) = 0
trigger1 = timemod = 25, 0
helpertype = normal ;player
name = "Charge Swirl"
ID = 471
stateno = 471
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999999
pausemovetime = 999999999

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
triggerall = root,anim = 403
trigger1 = 1
pos = 12,-7

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
triggerall = root,anim = 404
trigger1 = 1
pos = -12,-7

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 480
pos = 10,-15

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 400
pos = 10,-15

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
triggerall = root,anim = 481
trigger1 = 1
pos = 12,-7

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 481 && root, animelem = 1
pos = 15,-7

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 481 && root, animelem = 2
pos = 12,-7

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 481 && root, animelem = 3
pos = 13,-10

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 481 && root, animelem = 4
pos = 9,-7

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 481 && root, animelem = 5
pos = 12,-7

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 481 && root, animelem = 6
pos = 7,-10

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 481 && root, animelem = 7
pos = 6,-10

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 481 && root, animelem = 8
pos = 8,-8

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
triggerall = root,anim = 482
trigger1 = 1
pos = -12,-7

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 482 && root, animelem = 1
pos = -15,-7

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 482 && root, animelem = 2
pos = -12,-7

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 482 && root, animelem = 3
pos = -13,-10

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 482 && root, animelem = 4
pos = -9,-7

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 482 && root, animelem = 5
pos = -12,-7

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,anim = 482 && root, animelem = 6
pos = -7,-10

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
triggerall = root,anim = 482 && root, animelem = 7
trigger1 = 1
pos = -6,-10

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
triggerall = root,anim = 482 && root, animelem = 8
trigger1 = 1
pos = -8,-8

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
triggerall = root,anim = 483
trigger1 = 1
pos = 2,-11

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
triggerall = root,anim = 484
trigger1 = 1
pos = -2,-15

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
triggerall = root,anim = 484 && animelem = 2
trigger1 = 1
pos = 8,-21

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
triggerall = root,anim = 487
trigger1 = 1
pos = 8,-21

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
triggerall = root,anim = 488
trigger1 = 1
pos = 4,-10

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,stateno = 3010
pos = 30*Helper(999999),Fvar(16),-18.5*Helper(999999),Fvar(16)

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 0
trigger1 = root,stateno = 620
pos = 13*Helper(999999),Fvar(16),-24*Helper(999999),Fvar(16)

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 1
trigger1 = root,stateno != 620
pos = 21*Helper(999999),Fvar(16),-40*Helper(999999),Fvar(16)

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,var(2) = 1
trigger1 = root,stateno = 620
pos = 21*Helper(999999),Fvar(16),-15*Helper(999999),Fvar(16)

[State 9001:VarRandom]
type=VarRandom
trigger1=1
v=0
range=-65,65

[State 9001:VarRandom]
type=VarRandom
trigger1=1
v=1
range=-65 ,65

[State 9001:Helper]
type=Helper
trigger1=((GameTime%2)=0)
helpertype=Normal
name="Charge Balls"
id=472
stateno=472
pos=var(0),var(1)
postype=p1
facing=1
keyctrl=0
ownpal=1
supermovetime=9999
pausemovetime=9999
ignorehitpause=1

[State 0, StopSnd]
type = StopSnd
trigger1 = root,stateno != 400
trigger2 = root,stateno = 402
trigger3 = root,movetype = h
channel = 5

[State 200, End]
type = Destroyself
trigger1 = root,stateno != 400
trigger2 = root,stateno = 402
trigger3 = root,movetype = h
;-------------------------------------------------------------------------------
; raygun charge swirl
[Statedef 471]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 470
sprpriority = 9

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.55,0.55

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 200, End]
type = Destroyself
trigger1 = root,stateno != 400
trigger2 = root,stateno = 402
trigger3 = root,movetype = h
;--------------------------------------------------------------
;Charge Balls
[Statedef 472]
Type=S
MoveType=I
Physics=S
Juggle=4
Ctrl=0
Anim=551
SprPriority=9

[State 0,VarSet]
Type=VarSet
Trigger1=!Time
FV=2
Value=(-0.02+0.02*(Random%2))

[State 0,AngleDraw]
Type=AngleDraw
Trigger1=1
Scale=0.1+Fvar(2),0.1+Fvar(2)

[State 0,VelSet]
Type=VelSet
Trigger1=1
X=(ParentDist X-0)/15.0
Y=(Parentdist y-0)/15.0

[State 0,AssertSpecial]
type=AssertSpecial
trigger1=1
flag=NoShadow

[State 0,DestroySelf]
type=Destroyself
TRIGGERALL = cond(SelfAnimExist(2),var(46):=1,1)
Trigger1 = Time>=29
trigger2 = root,stateno != 400
trigger3 = root,stateno = 402
trigger4 = root,movetype = h
;-------------------------------------------------------------------------------
; P2 - Thrown Backward
[Statedef 454]
type    = A
movetype= H
physics = N
juggle  = 1
velset = -15, -3
ctrl = 0
sprpriority = 1
Facep2 = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5020+ifelse(authorname = "Mikel8888",var(10),0)
elem = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0 
time = 50
freq = 30
ampl = -3
phase = 90

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 5

[State 0, SelfState]
type = SelfState
trigger1 = time = 150
value = 5071

[State 200, End]
type = ChangeState
trigger1 = backedgebodydist < 5
value = 456
;-------------------------------------------------------------------------------
; P2 - Thrown Forward
[Statedef 455]
type    = A
movetype= H
physics = N
juggle  = 1
velset = -15, 0
ctrl = 0
sprpriority = 1
Facep2 = 1

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5020+ifelse(authorname = "Mikel8888",var(10),0)
elem = 2

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0 
time = 50
freq = 30
ampl = -3
phase = 90

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 5

[State 200, End]
type = ChangeState
trigger1 = backedgebodydist < 5
value = 456
;-------------------------------------------------------------------------------
; P2 - Hit The Wall
[Statedef 456]
type    = A
movetype= H
physics = A
juggle  = 1
velset = 3,-8
ctrl = 0
sprpriority = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 20

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -10

[State 200, End]
type = Selfstate
trigger1 = time = 1
value = 5050
;-------------------------------------------------------------------------------
; Helper - P2 Hit The Wall
[Statedef 460]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S100,1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S100,1

[State 0, Tierra Pared]
type = Explod
trigger1 = time = 0
anim = 8250
ID = 8250
pos = -20,0
postype = p1
vel = -2,-2
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .7,.7
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause = 0

[State 0, Tierra Impact]
type = Explod
trigger1 = time = 0
anim = 8260
ID = 8260
pos = -10*Helper(999999),Fvar(16),0*Helper(999999),Fvar(16)
postype = p1
facing = -1
bindtime = 1
removetime = -2
scale = .4*Helper(999999),Fvar(16),.45*Helper(999999),Fvar(16)
sprpriority = 2
angle = 90
ontop = 1
ownpal = 1

[State 200, End]
type = Destroyself
trigger1 = time = 1
;-------------------------------------------------------------------------------
; P2 - Thrown
[Statedef 465]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 9999

[State 2001, PosAdd]
type = PosAdd
trigger1 = 1
x = p2dist x

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S100,0
volume = 50
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S100,0
volume = 50

[State 0, Explod]
type = Explod
trigger1 = timemod = 2,0
anim = 7022
ID = 1051
pos = 0,5
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .3,.3
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1

[State 0, Shockwave]
type = Explod
triggerall = time >= 10
trigger1 = timemod = 5,0
trigger2 = time = 10
anim = 431
ID = 431
pos = 0,-25*Helper(999999),Fvar(16)
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*Helper(999999),Fvar(16),.2*Helper(999999),Fvar(16)
vel = -.5,-.5
sprpriority = 1
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, Shadow FX]
type = Explod
Trigger1 = TimeMod = 3,0
anim = 580
ID = 580
pos = (-25-Random%20),(-10-Random%20)
postype = p1
facing = -1
vfacing = 1
bindtime = -1
removetime = -2
scale = .45,.15
sprpriority = 2
ontop = Cond(Random<500,1,0)
ownpal = 1
removeongethit = 1
ignorehitpause = 1
Vel = -1,0
angle = 90

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = enemy,stateno != 455
id = 580

[State 200, End]
type = Destroyself
trigger1 = enemy,stateno != 455
;-------------------------------------------------------------------------------
; P2 - Down Launched
[Statedef 8455]
type    = S
movetype= H
physics = N
juggle  = 1
ctrl = 0
sprpriority = 1
Facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 5

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -8
y = 10

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5100+Cond(authorname = "Mikel8888"||authorname = "Rivelio"||authorname = "Knightmare"||authorname = "InSeph",var(10),0)
elem = 1

[State 200, End]
type = ChangeState
trigger1 = pos y > 0
value = 8456

[State 200, End]
type = ChangeState
trigger1 = backedgebodydist < 5
value = 456
;-------------------------------------------------------------------------------
; P2 - In Floor
[Statedef 8456]
type    = S
movetype= H
physics = N
juggle  = 1
ctrl = 0
sprpriority = 1
Facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 5

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 580

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time < 15
value = -1
kill = 1

[State 0, VelSet]
type = VelSet
trigger1 = time < 15
x = -4
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = time > 15
x = 0
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noautoturn

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 5

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time < 15
value = 5101+Cond(authorname = "Mikel8888"||authorname = "Rivelio"||authorname = "Knightmare"||authorname = "InSeph",var(10),0)
elem = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time > 15
value = 5110+Cond(authorname = "Mikel8888"||authorname = "Rivelio"||authorname = "Knightmare"||authorname = "InSeph",var(10),0)
elem = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S3,3
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S3,3

[State 200, End]
type = Selfstate
triggerall = alive
trigger1 = time = 50
value = 5120

[State 200, End]
type = Selfstate
triggerall = !alive
trigger1 = time = 50
value = 5150

[State 200, End]
type = TargetState
trigger1 = backedgebodydist < 5
value = 456  
;-------------------------------------------------------------------------------
; P2 - Fall in Ground
[Statedef 8457]
type    = S
movetype= A
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S100,0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S100,0

[State 0, Speed FX]
type = Explod
triggerall = time = [0,15]
trigger1 = timemod = 2,0
anim = 581
id = 580
pos = 10-random%30,-5-random%35
postype = p2
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4,.15
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1
Trans = sub
Angle = -45
pausemovetime = 99999

[State 200, End]
type = Destroyself
trigger1 = time = 50
;-------------------------------------------------------------------------------
; P2 - Sliding in Floor
[Statedef 8458]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S100,1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S100,1

[State 2001, PosAdd]
type = PosAdd
trigger1 = 1
x = p2dist x

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, Explod]
type = Explod
triggerall = time < 15
triggerall = pos y = 0
trigger1 = timemod = 4,0
anim = 7022
ID = 1051
pos = -15,7
postype = p1
facing = -1
vfacing = 1
bindtime = 1
vel = 2,0
removetime = -2
scale = .2,.2
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1

[State 0, Floor Broken]
type = Explod
triggerall = time < 15
triggerall = pos y = 0
trigger1 = timemod = 8,0
anim = 7025
ID = 8240
pos = -20,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .5,.5
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 0

[State 0, Floor Dust]
type = Explod
triggerall = time < 15
triggerall = pos y = 0
trigger1 = timemod = 5,0
anim = 8230
ID = 8230
pos = -20,6
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .25,.25
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause = 0

[State 0, Explod]
type = Explod
triggerall = time < 15
triggerall = pos y = 0
trigger1 = timemod = 4,0
anim = 7022
ID = 1051
pos = -15,7
postype = p2
facing = -1
vfacing = 1
bindtime = 1
vel = 2,0
removetime = -2
scale = .2,.2
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1

[State 0, Floor Broken]
type = Explod
triggerall = time < 15
triggerall = pos y = 0
trigger1 = timemod = 8,0
anim = 8240
ID = 8240
pos = -20,0
postype = p2
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .5,.5
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 0

[State 0, Floor Dust]
type = Explod
triggerall = time < 15
triggerall = pos y = 0
trigger1 = timemod = 5,0
anim = 8230
ID = 8230
pos = -20,6
postype = p2
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .25,.25
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause = 0

[State 200, End]
type = Destroyself
trigger1 = enemy,stateno != 8456
;-------------------------------------------------------------------------------
; P2 - Crash in Wall
[Statedef 8459]
type    = A
movetype= H
physics = A
juggle  = 2
velset = 0,0
ctrl = 0
sprpriority = 2

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 0
id = 580

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -10

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
y = -4
x = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S100,1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S100,1

[State 0,Wall Impact]
type = Explod
trigger1 = time = 0
anim = 8260
ID = 8260
postype = P1
pos = -20,-5
facing = -1
sprpriority = 2
removetime = -2
bindtime = 1
ownpal = 1
scale = .3,.3
angle = 90
removeongethit = 1
ontop = 1
ignorehitpause = 1
supermovetime 	= 999
pausemovetime = 9999

[State 0, Wall Dust]
type = Explod
trigger1 = time = 0
anim = 8250
ID = 8250
pos = 75,0
postype = p1
vel = -2,-2
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .5,.5
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause = 0

[State 200, End]
type = selfstate
trigger1 = time = 1
value = 5050
;-------------------------------------------------------------------------------
; P2 - Bounce off Ground
[Statedef 8460]
type    = S
movetype= H
physics = N
juggle  = 1
ctrl = 0
sprpriority = 1
Facep2 = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
y = 10

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5100+Cond(authorname = "Mikel8888"||authorname = "Rivelio"||authorname = "Knightmare"||authorname = "InSeph",var(10),0)
elem = 1

[State 200, End]
type = SelfState
trigger1 = pos y > 0
value = 8461
;-------------------------------------------------------------------------------
; P2 - Bounce off Ground - Back Up
[Statedef 8461]
type    = S
movetype= H
physics = A
juggle  = 1
ctrl = 0
sprpriority = 1
Facep2 = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
y = -10

[State 0, LifeAdd]
type = LifeAdd
trigger1 = time = 0
value = -20
kill = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5060+Cond(authorname = "Mikel8888"||authorname = "Rivelio"||authorname = "Knightmare"||authorname = "InSeph",var(10),0)
elem = 1

[State 200, End]
type = SelfState
triggerall = time > 5
trigger1 = pos y > 0
value = 5201
;-------------------------------------------------------------------------------
; P2 - Bounce off Ground FX
[Statedef 8462]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 9999

[State 2001, PosAdd]
type = PosAdd
trigger1 = 1
x = p2dist x
y = p2dist y

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S100,0
volume = 50
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S100,0
volume = 50

[State 0, Shockwave]
type = Explod
triggerall = time >= 0
trigger1 = timemod = 5,0
trigger2 = time = 0
anim = 431
ID = 431
pos = 0,-25*Helper(999999),Fvar(16)
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .1*Helper(999999),Fvar(16),.1*Helper(999999),Fvar(16)
vel = -.5,-.5
sprpriority = 1
ontop = 1
ownpal = 1
removeongethit = 1
angle = 90

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S100,0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 0
value = S100,0

[State 0, Speed FX]
type = Explod
triggerall = time = [0,15]
trigger1 = timemod = 2,0
anim = 581
id = 580
pos = 0,-15-random%35
postype = p2
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4,.15
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1
Trans = sub
Angle = 0
pausemovetime = 99999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = enemy,stateno != 8460
id = 580

[State 200, End]
type = Destroyself
trigger1 = enemy,stateno != 8460
;-------------------------------------------------------------------------------
; P2 - Bounce off Ground - Back Up FX
[Statedef 8463]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 9999

[State 2001, PosAdd]
type = PosAdd
trigger1 = 1
x = p2dist x
y = p2dist y

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S100,1
volume = 50
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S100,1
volume = 50

[State 0, Shockwave]
type = Explod
triggerall = time <= 24
triggerall = time >= 0
trigger1 = timemod = 10,0
trigger2 = time = 0
anim = 431
ID = 580
pos = 0,5*Helper(999999),Fvar(16)
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .1*Helper(999999),Fvar(16),.1*Helper(999999),Fvar(16)
vel = -.5,-.5
sprpriority = 1
ontop = 1
ownpal = 1
removeongethit = 1
angle = 90

[State 0, Speed FX]
type = Explod
triggerall = time <= 24
triggerall = time = [0,15]
trigger1 = timemod = 2,0
anim = 581
id = 580
pos = 0,30-random%35
postype = p2
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4,.15
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 1
ignorehitpause = 1
Trans = sub
Angle = 0
pausemovetime = 99999

[State 0,Wall Impact]
type = Explod
trigger1 = time = 0
anim = 8260
ID = 8260
postype = P1
pos = 0,2
facing = -1
sprpriority = 2
removetime = -2
bindtime = 1
ownpal = 1
scale = .3,.3
angle = 0
removeongethit = 1
ontop = 1
ignorehitpause = 1
supermovetime 	= 999
pausemovetime = 9999

[State 0, Wall Dust]
type = Explod
trigger1 = time = 0
anim = 8250
ID = 8250
pos = 75,0
postype = p1
vel = -2,-2
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .5,.5
sprpriority = 2
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause = 0

[State 0, Crashed Ground]
type = Explod
trigger1 = time = 0
anim = 7025
ID = 7025
pos = 0,20
postype = p1
scale = 0.5,0.5
sprpriority = -9
ontop = 0
ownpal = 1
removetime = -2

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = enemy,stateno != 8461
id = 580

[State 200, End]
type = Destroyself
trigger1 = enemy,stateno != 8461
;-------------------------------------------------------------------------------
;Rings
[Statedef 8309]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 432
sprpriority = 3

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.7+(Time*0.025),0.7+(Time*0.025)
value = 90
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = Time>=10
V = 0
value = 50
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 225-VAR(0),256
ignorehitpause = 1

[State 200, End]
type = Destroyself
trigger1 = AnimTime=0
;===============================================================================
; Power Charge:
;-------------------------------------------------------------------------------
; Power Charge - Start
[Statedef 500]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 500+var(11)
sprpriority = 2

[State 0, Aura Base & Kaioken]
type = Helper
trigger1 = time = 14
helpertype = normal
name = "Aura"
ID = 550
stateno = 550
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale=0.25
size.yscale=0.25

[State 0, Aura Base & Kaioken]
type = Helper
trigger1 = time = 14
helpertype = normal
name = "Aura"
ID = 551
stateno = 550
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale=0.25
size.yscale=0.25

[State 0, Aura Base & Kaioken]
type = Helper
trigger1 = time = 14
helpertype = normal
name = "Aura"
ID = 552
stateno = 552
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale=0.25
size.yscale=0.25

[State 0, Aura Base & Kaioken]
type = Helper
trigger1 = time = 14
helpertype = normal
name = "Aura"
ID = 553
stateno = 553
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale=0.275
size.yscale=0.25

[State 0, Aura Base & Kaioken]
type = Helper
trigger1 = time = 14
helpertype = normal
name = "Aura"
ID = 554
stateno = 553
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale=0.275
size.yscale=0.25

[State 0, Aura Base & Kaioken]
type = Helper
trigger1 = time = 14
helpertype = normal
name = "Aura"
ID = 555
stateno = 553
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale=0.275
size.yscale=0.25

[State 0,Explod]
type=Explod
trigger1=Time>=10
trigger1=Time%3=0
Anim=551
ID=560
Pos=(40-Random%80)*Cond(Random<500,-1,1),-30+(Random%40)*Cond(Random<500,-1,1)
PosType=P1
Vel=Random%100*Cond(Random<=500,0.01*(Random%2),-0.01*(Random%2)),-0.5
Accel=0.02,-0.05 - 0.04*(Random%4)
Scale=0.02,0.02
OnTop=Cond(Random<=500,0,1)
OwnPal=1
SuperMoveTime=999
IgnoreHitPause=1

[State 0,Explod]
type=Explod
Triggerall = Time >= 10
trigger1 = Time % 12 = 10
anim = 7014
ID = 7014
pos = 0,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4,.4
vel = 0,0
sprpriority = 3
ontop = 1
ownpal = 1
Trans = AddAlpha
Alpha = 200,256
removeongethit = 1

[State 0, Viento]
type = Explod
trigger1 = animelem=2
trigger2 = time > 7 && time%10 = 0
anim = 7022
ID = 550
pos = 5*Helper(999999),Fvar(16),0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .3*Helper(999999),Fvar(16),.4*Helper(999999),Fvar(16)
vel = -2,0
sprpriority = 3
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, Viento]
type = Explod
trigger1 = animelem=2
trigger2 = time > 7 && time%10 = 0
anim = 7022
ID = 550
pos = -5*Helper(999999),Fvar(16),0
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .3*Helper(999999),Fvar(16),.4*Helper(999999),Fvar(16)
vel = 2,0
sprpriority = 3
ontop = 1
ownpal = 1
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 7
value = S500,2
volume = 50
channel = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = time >= 35
trigger1 = timemod = 30,0
value = S500,3
volume = 50
channel = 2

[State 0,EnvShake]
type=EnvShake
triggerall= Time >=10
trigger1 = Time %10 = 0
time = 10
ampl = -3
freq = 20

[State 0, PowerAdd]
type = PowerAdd
triggerall = time >= 7
trigger1 = 1
value = 10

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,18
volume = 999
channel = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,18
volume = 999
channel = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,18
volume = 999
channel = 3

[State 200, End]
type = ChangeState
Triggerall = ailevel = 0
triggerall = time >= 12
trigger1 = command != "hold_s"
trigger2 = power = 3000
value = 501
;-------------------------------------------------------------------------------
; Power Charge - Fin
[Statedef 501]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 501+var(11)
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S500,4
volume = 50

[State 0, StopSnd]
type = StopSnd
trigger1 = 1
channel = 5

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Aura - Start
[Statedef 550]
type    = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 553
sprpriority = 3

[State 0, Explosion]
type = Explod
trigger1 = time = 0
anim = 9022
ID = 9022
pos = 0,0
postype = left
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = 999,999
sprpriority = 9
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause = 1
supermove = 99999
pausemove = 99999
supermovetime = 99999
pausemovetime = 99999

[State 0, SprPriority]
type = SprPriority
trigger1 = isHelper(551)
value = 0
ignorehitpause = 1

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
pos = -5,0

[State 0,AngleDraw]
type=AngleDraw
Trigger1= time = 0
scale=1,1

[State 0,AngleDraw]
type=AngleDraw
Trigger1= time = 10
scale=1.075,1.075

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 20    ;fv = 10
value = 0

[State 0, VarAdd]
type = VarAdd
triggerall = ishelper(550)
trigger1 = var(20) < 35
trigger1 = parent,stateno = 500
v = 20
value = 5

[State 0, VarAdd]
type = VarAdd
triggerall = ishelper(550)
trigger1 = parent, time >= 10
v = 20
value = -5

[State 0,VarAdd]
type = VarAdd
Triggerall = IsHelper(551)
trigger1 = VAR(20) < 220
trigger1 = Parent,StateNo = 500
v = 20
value = 25
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
triggerall = ishelper(550)
trigger1 = parent, time >= 10
v = 20
value = -15

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = var(20),256

[State 0, PalFXWiz]
type = PalFX
triggerall = root,var(2) = 0
trigger1 = 1
time = 999999999
add=-156,-10,0
mul = 512,256,512
sinadd = 0,0,0,1
invertall = 0
color = 0

[State 0, PalFXWiz]
type = PalFX
triggerall = root,var(2) = 1
trigger1 = 1
time = 999999999
add = 0,-156,-156
mul = 512,512,512
sinadd = 0,0,0,1
invertall = 0
color = 0

[State 200, End]
type = Destroyself
trigger1 = root,movetype = H

[State 200, End]
type = Changestate
trigger1 = root,stateno != 500
value = 551
;-------------------------------------------------------------------------------
; Aura - Fin
[Statedef 551]
type    = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
sprpriority = 3

[State 0, Explosion]
type = Explod
trigger1 = time = 0
anim = 9022
ID = 9022
pos = 0,0
postype = left
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = 999,999
sprpriority = 9
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause = 1
supermove = 99999
pausemove = 99999
supermovetime = 99999
pausemovetime = 99999

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
pos = 0,10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 200-(time*20),256

[State 200, End]
type = Destroyself
trigger1 = time = 1
trigger2 = root,movetype = H
;-------------------------------------------------------------------------------
; Aura
[Statedef 552]
type    = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 552
sprpriority = 3

[State 0, Explosion]
type = Explod
trigger1 = time = 0
anim = 9022
ID = 9022
pos = 0,0
postype = left
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = 999,999
sprpriority = 9
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause = 1
supermove = 99999
pausemove = 99999
supermovetime = 99999
pausemovetime = 99999

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
pos = -5,10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 20,256

[State 0, PalFXWiz]
type = PalFX
triggerall = root,var(2) = 0
trigger1 = 1
time = 999999999
add=-156,-10,0
mul = 512,256,512
sinadd = 0,0,0,1
invertall = 0
color = 0

[State 0, PalFXWiz]
type = PalFX
triggerall = root,var(2) = 1
trigger1 = 1
time = 999999999
add = 0,-156,-156
mul = 512,512,512
sinadd = 0,0,0,1
invertall = 0
color = 0

[State 200, End]
type = Destroyself
trigger1 = root,movetype = H
trigger2 = root,stateno != 500
;-------------------------------------------------------------------------------
; Aura
[Statedef 553]
type    = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 554
sprpriority = 4

[State 0, SprPriority]
type = SprPriority
triggerall = ishelper(554)
trigger1 = 1
value = -1
ignorehitpause = 1

[State 0, Explosion]
type = Explod
trigger1 = time = 0
anim = 9022
ID = 9022
pos = 0,0
postype = left
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = 999,999
sprpriority = 9
ontop = 1
ownpal = 1
removeongethit = 0
ignorehitpause = 1
supermove = 99999
pausemove = 99999
supermovetime = 99999
pausemovetime = 99999

[State 0,AngleDraw]
type = AngleDraw
Trigger1 = time = 0
scale = 1,1
value = 0

[State 0,AngleDraw]
type = AngleDraw
Trigger1 = time = 10
scale = 1.075,1.075
value = 0

[State 0, PalFXWiz]
type = PalFX
triggerall = ishelper(553) || ishelper(555)
triggerall = root,var(2) = 0
trigger1 = 1
time = 999999999
add=-156,-10,0
mul = 512,256,512
sinadd = 0,0,0,1
invertall = 0
color = 0

[State 0, PalFXWiz]
type = PalFX
triggerall = ishelper(553) || ishelper(555)
triggerall = root,var(2) = 1 
trigger1 = 1
time = 999999999
add = 0,-256,-256
mul = 512,512,512
sinadd = 0,0,0,1
invertall = 0
color = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 555

[State 0, PalFXWiz]
type = PalFX
triggerall = ishelper(554)
trigger1 = 1
time = 9999999
add = 0,0,0
mul = 512,512,512
sinadd = 0,0,0,1
invertall = 1
color = 0

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 21    ;fv = 10
value = 0

[State 0, VarAdd]
type = VarAdd
triggerall = ishelper (553) || ishelper(554)
trigger1 = var(21) < 60
trigger1 = parent,stateno = 500
v = 21    ;fv = 10
value = 20
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
triggerall = ishelper (555)
trigger1 = var(21) < 195
trigger1 = parent,stateno = 500
v = 21    ;fv = 10
value = 20
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
triggerall = ishelper(553) || ishelper(554)
trigger1 = time >= 10
v = 21    ;fv = 10
value = -8
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
triggerall = ishelper(555)
trigger1 = time >= 10
v = 21    ;fv = 10
value = -15
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = -5,10

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, Trans]
type = Trans
triggerall = !ishelper(554)
trigger1 = 1
trans = addalpha
alpha = var(21),256

[State 0, Trans]
type = Trans
triggerall = ishelper(554)
trigger1 = 1
trans = sub
alpha = var(21),256

[State 200, End]
type = Destroyself
trigger1 = root,movetype = H
trigger2 = root,stateno != 500
;-------------------------------------------------------------------------------
; Camara Lenta
[Statedef 590]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = 2

[State 0, Pause]
type = Pause
trigger1 = time = [0,5]
time = 1

[State 200, End]
type = Destroyself
trigger1 = time = 20
;-------------------------------------------------------------------------------
; Aura Permanente Ren
[Statedef 560]
type    = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = -1

[State 0, Turn]
type = Turn
trigger1 = facing != root,facing

[State 0, BindToRoot]
type = BindToRoot
trigger1 = 1
pos = 0,0

[State 0, Aura Arriba]
type = Explod
triggerall = root,vel x = 0
trigger1 = timemod = 6,0
anim = 560
ID = 560
pos = -7*Helper(999999),Fvar(16)+random%15*Helper(999999),Fvar(16),0-random%30*Helper(999999),Fvar(16)
postype = p1
facing = ifelse(random < 500,1,-1)
vfacing = 1
bindtime = 1
vel = 0,-2
accel = 0,0
random = 0,0
removetime = -2
scale = .7*Helper(999999),Fvar(16),.7*Helper(999999),Fvar(16)
sprpriority = 3
ontop = 1
trans = addalpha
alpha = 150,256
supermove = 999
supermovetime = 999
pausemove = 999
pausemovetime = 999

[State 0, Aura Atras]
type = Explod
triggerall = root,vel x > 0
trigger1 = timemod = 6,0
anim = 561
ID = 560
pos = -7*Helper(999999),Fvar(16)+random%15*Helper(999999),Fvar(16),0-random%30*Helper(999999),Fvar(16)
postype = p1
facing = -1
vfacing = 1
bindtime = 1
vel = -1,0
accel = 0,0
random = 0,0
removetime = -2
scale = .7*Helper(999999),Fvar(16),.7*Helper(999999),Fvar(16)
sprpriority = 3
ontop = 1
trans = addalpha
alpha = 150,256
supermove = 999
supermovetime = 999
pausemove = 999
pausemovetime = 999

[State 0, Aura Alante]
type = Explod
triggerall = root,vel x < 0
trigger1 = timemod = 6,0
anim = 561
ID = 560
pos = -7*Helper(999999),Fvar(16)+random%15*Helper(999999),Fvar(16),0-random%30*Helper(999999),Fvar(16)
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 1,0
accel = 0,0
random = 0,0
removetime = -2
scale = .7*Helper(999999),Fvar(16),.7*Helper(999999),Fvar(16)
sprpriority = 3
ontop = 1
trans = addalpha
alpha = 150,256
supermove = 999
supermovetime = 999
pausemove = 999
pausemovetime = 999

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root,stateno = 5110
id = 560

[State 200, End]
type = Destroyself
trigger1 = time = -1
trigger2 = root,var(3) = 0

;===============================================================================
; A Air:
;-------------------------------------------------------------------------------
; A Air 1
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 600
poweradd = 30
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,14
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = movecontact = 1
x = 1.5
y = -1.5

[State 0, VelSet]
type = VelSet
trigger1 = time = 24
x = 1

[State 200, 1]
type = HitDef
trigger1 = animelem = 2||animelem = 3||animelem = 4||animelem = 5||animelem = 6||animelem = 7
attr = A, NA
animtype  = Light
damage    = 10
guardflag = HA
pausetime = 6,5
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,30
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -0.5,0
air.velocity = -0.5,-1
envshake.time = 10
Fall = 0

[State 0, Helper]
type = Helper
triggerall = Numhelper(801) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 801
stateno = 801
pos = -10+random%20,-10-random%40
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 0, Helper]
type = Helper
triggerall = Numhelper(802) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 802
stateno = 801
pos = 0,-30
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 0, Helper]
type = Helper
triggerall = Numhelper(803) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 803
stateno = 801
pos = 0,-30
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 200, End]
type = ChangeState
Triggerall = movecontact && time > 11
trigger1 = ailevel = 0 && command = "a"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 605

[State 200, End]
type = ChangeState
Triggerall = movecontact && time > 11
trigger1 = ailevel = 0 && command = "b"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 610

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; A Air 2
[Statedef 605]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 605
poweradd = 30
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,14
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 5
y = -2

[State 0, VelSet]
type = VelSet
trigger1 = time = 8
x = 3

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Light
damage    = 10
guardflag = HA
pausetime = 10,10
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,41
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,6
air.velocity = -2,6
Fall = 1

[State 0, Helper]
type = Helper
triggerall = Numhelper(801) = 0
trigger1 = Movehit = 1
helpertype = normal ;player
name = "Hitspark"
ID = 801
stateno = 801
pos = -10+random%20,-10-random%40
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
ignorehitpause = 1
size.xscale = 0.12
size.yscale = 0.12

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;===============================================================================
; Down + B Air:
;-------------------------------------------------------------------------------
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 610
poweradd = 40
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S0,12
volume = 999

[State 0, VelSet]
type = VelSet
trigger1 = movecontact = 1
x = 0
y = -5

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Heavy
damage    = 28
guardflag = MA
pausetime = 6,12
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S2,3
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,6
air.velocity = -2,6
Fall = 1
Envshake.time = 10
p2stateno = 8460

[State 0, Charge]
type = Helper
trigger1 = animelem = 2
helpertype = normal
name = "Charge"
ID = 611
stateno = 611
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
Supermovetime = 999
size.xscale = .25*Helper(999999),Fvar(16)
size.yscale = .25*Helper(999999),Fvar(16)

[State 0,Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
ID = 371
name = "Ray-Hitspark"
stateno = 803
pos = 35,-5
postype = P1
facing = Cond(Random<500,1,-1)
ownpal = 1
size.xscale = 0.075*1.5
size.yscale = 0.075*1.5
ignorehitpause = 1
persistent = 0

[State 0,Helper]
type = Helper
trigger1 = movecontact = 1
helpertype = normal
ID = 371
name = "Ray-Hitspark"
stateno = 804
pos = 35,-5
postype = P1
facing = Cond(Random<500,1,-1)
ownpal = 1
size.xscale = .25+var(10)/500
size.yscale = .25+var(10)/500
ignorehitpause = 1
persistent = 0

[State 0,Helper]
type = Helper
trigger1 = movecontact = 1
helpertype = normal
ID = 073
name = "Ray-Hitspark"
stateno = 803
pos = 35,-5
postype = P1
facing = Cond(Random<500,1,-1)
ownpal = 1
size.xscale = .125+var(10)/500
size.yscale = .125+var(10)/500
ignorehitpause = 1
persistent = 0

[State 0,Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "Reikodan - FX"
ID = 241
stateno = 6135
pos = 30,-5
Size.XScale = .2
Size.YScale = .2
postype = p1
facing = 1
ownpal = 1
Persistent = 0

[State 200, End]
type = ChangeState
Triggerall = movecontact && time > 11
trigger1 = ailevel = 0 && command = "b"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 600

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; raygun charge
[Statedef 611]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 551+root,var(11)
sprpriority = 9

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time < 30
scale = .1+time*.015,.1+time*.015

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time > 30
scale = 0.55,0.55

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 30, 0
value = S5,36
volume = 999
channel = 5

[State 0, Helper]
type = Helper
triggerall = numhelper(612) = 0
trigger1 = timemod = 25, 0
helpertype = normal ;player
name = "Charge Swirl"
ID = 612
stateno = 612
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999999
pausemovetime = 999999999

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,time>=2 && root,time < 9
trigger1 = 1
pos = -2,-37

[State 0, BindToRoot]
type = BindToRoot
triggerall = root,time >= 9 && root,time < 11
trigger1 = 1
pos = 22,-3

[State 9001:VarRandom]
type=VarRandom
trigger1=1
v=0
range=-65,65

[State 9001:VarRandom]
type=VarRandom
trigger1=1
v=1
range=-65 ,65

[State 9001:Helper]
type=Helper
trigger1=((GameTime%2)=0)
helpertype=Normal
name="Charge Balls"
id=613
stateno=613
pos=var(0),var(1)
postype=p1
facing=1
keyctrl=0
ownpal=1
supermovetime=9999
pausemovetime=9999
ignorehitpause=1

[State 0, StopSnd]
type = StopSnd
trigger1 = root,animelem = 4
trigger2 = root,stateno != 610
trigger3 = root,movetype = h
channel = 5

[State 200, End]
type = Destroyself
trigger1 = root,animelem = 4
trigger2 = root,stateno != 610
trigger3 = root,movetype = h
;-------------------------------------------------------------------------------
; raygun charge swirl
[Statedef 612]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 470
sprpriority = 9

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 0.55,0.55

[State 0, Trans]
type = Trans
trigger1 = 1
trans = add

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 200, End]
type = Destroyself
trigger1 = root,animelem = 4
trigger2 = root,stateno != 610
trigger3= root,movetype = h
;---------------------------------------------------------------
;Charge Balls
[Statedef 613]
Type=S
MoveType=I
Physics=S
Juggle=4
Ctrl=0
Anim=551
SprPriority=9

[State 0,VarSet]
Type=VarSet
Trigger1=!Time
FV=2
Value=(-0.02+0.02*(Random%2))

[State 0,AngleDraw]
Type=AngleDraw
Trigger1=1
Scale=0.1+Fvar(2),0.1+Fvar(2)

[State 0,VelSet]
Type=VelSet
Trigger1=1
X=(ParentDist X-0)/15.0
Y=(Parentdist y-0)/15.0

[State 0,AssertSpecial]
type=AssertSpecial
trigger1=1
flag=NoShadow

[State 0,DestroySelf]
type=Destroyself
TRIGGERALL = cond(SelfAnimExist(2),var(46):=1,1)
Trigger1 = Time>=29
trigger2 = root,animelem = 4
trigger3 = root,stateno != 610
trigger4 = root,movetype = h
;----------------------------------------------------------------------
;Reikodan - FX
[Statedef 614]
type=A
movetype=I
physics=N
anim=385
sprpriority=3
velset=1,0

[State 0,PalFXWiz]
type=PalFX
trigger1=1
time=99999
add=-128,-25,0
mul=512,512,512
color=64

[State 0, BindToRoot]
type = BindToRoot
trigger1 = time >= 0
pos = 30,-5

[State 0,VarAdd]
type=VarAdd
trigger1=Time=[0,3]
fv=5
value=.125

[State 0,VarAdd]
type=VarAdd
trigger1=Time>=4
fv=5
value=-.25

[State 0,AngleDraw]
type=AngleDraw
trigger1=1
scale=1,1+FVar(5)
value = -48
ignorehitpause=1

[State 0,Trans]
type=Trans
trigger1=AnimElemTime(4)>0
trans=AddAlpha
Alpha=256-(Time*20),256

[State 0,AssertSpecial]
type=AssertSpecial
trigger1=1
flag=NoShadow
ignorehitpause=0

[State 200,End]
type=Destroyself
trigger1=animtime = 0
;===============================================================================
; C Aire:
;-------------------------------------------------------------------------------
[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = 2
velset = 0,0
ctrl = 0
poweradd = -200
sprpriority = 2

[State 0, AngleDraw]
type = Null;AngleDraw
trigger1 = 1
value = -15

[State 0, Charge]
type = Helper
trigger1 = animelem=3
helpertype = normal
name = "Charge"
ID = 470
stateno = 470
pos = 0,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
Supermovetime = 999
size.xscale = .25*Helper(999999),Fvar(16)
size.yscale = .25*Helper(999999),Fvar(16)

[State 0, VelSet]
type = VelSet
trigger1 = time = 6
x = -2
y = -4

[State 0, VarSet]
type = VarSet
triggerall = prevstateno != 620
trigger1 = time = 0
v = 13
value = 0

[State 0, VarAdd]
type = VarAdd
triggerall = prevstateno = 620
trigger1 = time = 0
v = 13
value = 1

[State 0, Changeanim]
type = ChangeAnim
trigger1 = time = 0
value = (ifelse(var(13) = 1||var(13) = 3||var(13) = 5,620,620))+var(11)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=3
value = S0,5
volume = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=4
value = S0,3
volume = 999

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 6
time = 5
ampl = -2

[State 0, raygun]
type = Helper
trigger1 = animelem=4
trigger1 = var(2) = 0
helpertype = normal
name = "raygun"
ID = 625
stateno = 625
pos = 13*Helper(999999),Fvar(16),-24*Helper(999999),Fvar(16)
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.1*Helper(999999),Fvar(16)
size.yscale = 1.1*Helper(999999),Fvar(16)

[State 0, raygun]
type = Helper
trigger1 = animelem=4
trigger1 = var(2) = 1
helpertype = normal
name = "raygun"
ID = 625
stateno = 625
pos = 20*Helper(999999),Fvar(16),-17*Helper(999999),Fvar(16)
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1.2*Helper(999999),Fvar(16)
size.yscale = 1.2*Helper(999999),Fvar(16)

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; Ki Blast - Start
[Statedef 625]
type    = S
movetype= A
physics = N
juggle  = 2
ctrl = 0
anim = 450+root,var(11)
sprpriority = 3

[State 0, PosAdd]
type = Playsnd
trigger1 = time = 0
value = S2,1
volume = 999

[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = 1+root,fvar(2)+root,fvar(3)

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 410
time = 999

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 8
y = 8

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 460
time = 999

[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = 1+root,fvar(2)+root,fvar(3)

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 200, 1]
type = HitDef
triggerall = hitcount < 8
trigger1 = timemod = 1,0
attr = A, sp
animtype  = Heavy
Hitflag = MAFDE
damage    = 10
guardflag = MA
pausetime = 5,0
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-5
hitsound   = S1,22
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -1,-2
air.velocity = -2,-1.5
Fall = 1
Sprpriority = 3
Envshake.time = 10

[State 200, Spark CVS]
type = Explod
triggerall = Numexplod(7001) = 0
trigger1 = Movehit = 1
trigger1 = hitcount = 1||hitcount = 3||hitcount = 5||hitcount = 7||hitcount = 9
anim = 7010
ID = 7001
postype = P2
pos = -10+random%20,-10-random%20
facing = -1
sprpriority = 3
supermove = 1
removetime = -2
bindtime = 1
ownpal = 1
scale = .3*Helper(999999),Fvar(16),.3*Helper(999999),Fvar(16)
removeongethit = 1
ontop = 1
supermovetime 	= 999
ignorehitpause  = 1

[State 200, Spark CVS]
type = Explod
triggerall = Numexplod(7002) = 0
trigger1 = Movehit = 1
trigger1 = hitcount = 2||hitcount = 4||hitcount = 6||hitcount = 8||hitcount = 10
anim = 7010
ID = 7002
postype = P2
pos = -10+random%20,-10-random%20
facing = -1
sprpriority = 3
supermove = 1
removetime = -2
bindtime = 1
ownpal = 1
scale = .3*Helper(999999),Fvar(16),.3*Helper(999999),Fvar(16)
removeongethit = 1
ontop = 1
supermovetime 	= 999
ignorehitpause  = 1

[State 200, End]
type = ChangeState
trigger1 = hitcount >= 8
trigger2 = frontedgebodydist < 0
trigger3 = time = 500
trigger4 = pos y >= 0
value = 410
;===============================================================================
; Helper de Conexiones:
;-------------------------------------------------------------------------------
[Statedef 700]
type    = S
movetype= I
physics = S
anim = 9999

[State 200, End]
type = Destroyself
trigger1 = time = 15 || root,time < 5
;===============================================================================
; Hitspark:
;-------------------------------------------------------------------------------
[Statedef 801]
type= A
movetype= I
physics= N
anim = 7002
sprpriority = 10

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 999999999
add = 0,-56,-128
mul = 512,512,512
sinadd = 0,0,0,1
invertall = 0
color = 256

[State 0, Helper]
type = Helper
Triggerall = Random % 2 = 0
trigger1 = time = 0
helpertype = normal ;player
name = "Hit Spark Ring"
ID = 802
stateno = 802
pos = 0,0
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .35
size.yscale = .35

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time = 0
value = random % 360

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
;-----------------------------------------------------
;Hit Spark Ring
[Statedef 802]
type = A
movetype = I
physics  = N
juggle = 1
velset = 0,0
ctrl = 0
anim = 7011
sprpriority = 3

[State 0,AngleDraw]
type = AngleDraw
trigger1 = 1
scale = .15+time*.05,.15+time*.05

[State 0,Trans]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-(time*20),256

[State 0,AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0
persistent = 1

[State 200,End]
type=Destroyself
trigger1= Time >= 30
;--------------------------------------------------------------------------------
;Hitspark
[Statedef 803]
type=A
movetype=I
physics=N
anim=425
sprpriority=3

[State 0,VarSet]
type=VarSet
trigger1=!Time
v=0
value=Random%360

[State 0,AngleDraw]
type=AngleDraw
Trigger1=1
value=VAR(0)+(Time*.15)
scale=1+(Time*.05),1+(Time*.05)

[State 0,AssertSpecial]
type=AssertSpecial
trigger1=1
flag=Noshadow

[State 200,End]
type=Destroyself
TRIGGER1=animtime=0
;--------------------------------------------------------------------------------
;Hitspark
[Statedef 804]
type=A
movetype=I
physics=N
anim=7001
sprpriority=3

[State 0,VarSet]
type=VarSet
trigger1=!Time
v=0
value=Random%360

[State 0,AngleDraw]
type=AngleDraw
Trigger1=1
value=VAR(0)+(Time*.15)
scale=1+(Time*.025),1+(Time*.025)

[State 0,AssertSpecial]
type=AssertSpecial
trigger1=1
flag=Noshadow

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = 9999999999
add = -128,-25,0
mul = 512,512,512
sinadd = 0,0,0,1
invertall = 0
color = 0

[State 0, Helper]
type = Helper
Triggerall = Random % 2 = 0
trigger1 = time = 0
helpertype = normal ;player
name = "Hit Spark Ring"
ID = 802
stateno = 802
pos = 0,0
postype = p2    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .35
size.yscale = .35

[State 200,End]
type=Destroyself
TRIGGER1=animtime=0
;===============================================================================
; HELPER ESCALA:
;-------------------------------------------------------------------------------
[Statedef 999999]
type    = S
movetype= I
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = -1

[State 0, VarSet]
type = VarSet
trigger1 = 1
Fv = 16
value = 1

[State 200, End]
type = Destroyself
trigger1 = time = -1
